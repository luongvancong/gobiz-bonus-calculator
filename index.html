<!doctype html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Gobiz New Lunar Year Bonus Calculator</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <style>
        .relative {
            position: relative;
        }
        .absolute {
            position: absolute;
        }
        .icon-eye {
            top: 43px;
            right: 11px;
            cursor: pointer;
        }
        .result {

        }
        .result .text {
            font-size: 14px;
            font-weight: bold;
        }
        .result .number {
            font-weight: bold;
            font-size: 30px;
            color: red;
            padding-top: 20px;
        }
        i[class*="icon-"] {
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Gobiz New Lunar Year Bonus Calculator</h1>
        <div class="row">
            <div class="col-6">
                <form onsubmit="false">
                    <div class="form-group relative">
                        <label for="salary">Lương của bạn</label>
                        <input type="password" class="form-control" id="salary" >
                        <i id="icon-eye" class="fas fa-eye-slash icon-eye icon-eye-toggle absolute"></i>
                    </div>
                    <div class="form-group">
                        <label for="work_start_day">Ngày vào làm</label>
                        <input type="text" class="form-control datepicker" id="work_start_day">
                    </div>
                    <div class="form-group">
                        <label for="company_param">Hệ số kinh doanh công ty</label>
                        <input type="text" class="form-control" value="2.5" readonly id="company_param">
                    </div>
                    <div class="form-group">
                        <label for="department_param">Hệ số phòng</label>
                        <input type="text" class="form-control" value="1" readonly id="department_param">
                    </div>
                    <div class="form-group">
                        <label for="personal_param">Hệ số cá nhân quy đổi</label>
                        <input type="text" class="form-control" id="personal_param">
                        <span class="help text-info">Nhập hệ số cá nhân bằng số VD: 1, 1.6, 1.8</span>
                    </div>
                    <button type="button" id="btn-submit" class="btn btn-primary">Submit</button>
                </form>
            </div>
            <div class="col-6">
                <div class="result">
                    <div class="form-group relative">
                        <label>Bạn được thưởng:</label>
                        <input id="result" readonly class="form-control" type="password" />
                        <i class="fas fa-eye-slash icon-eye icon-eye-toggle absolute"></i>
                    </div>
                    <div class="form-group relative">
                        <label>Tháng lương 13:</label>
                        <input id="t13" class="form-control" type="password" readonly />
                        <i class="fas fa-eye-slash icon-eye icon-eye-toggle absolute"></i>
                    </div>
                    <div class="form-group relative">
                        <label class="text">Tổng thưởng trước tết(70%):</label>
                        <input id="totalBeforeLunarNewYear" class="form-control" type="password" readonly />
                        <i class="fas fa-eye-slash icon-eye icon-eye-toggle absolute"></i>
                    </div>
                    <div class="form-group relative">
                        <label class="text">Tổng thưởng sau tết(30%):</label>
                        <input id="totalAfterLunarNewYear" class="form-control" type="password" readonly />
                        <i class="fas fa-eye-slash icon-eye icon-eye-toggle absolute"></i>
                    </div>
                    <div class="form-group relative">
                        <label class="text">Tổng thưởng:</label>
                        <input id="total" class="form-control" type="password" readonly />
                        <i class="fas fa-eye-slash icon-eye icon-eye-toggle absolute"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/numeral.js/2.0.6/numeral.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js" integrity="sha512-qTXRIMyZIFb8iQcfjXWCO8+M5Tbc38Qi5WzdPOYZHIlZpzBHG3L3by84BBBOiRGiEb7KKtAOAs5qYdUiZiQNNQ==" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
        $(function() {

            $( ".datepicker" ).datepicker({
                changeMonth: true,
                changeYear: true,
                dateFormat: "yy-mm-dd",
                maxDate: "2020-12-31"
            });

            $('#btn-submit').click(function() {
                const $salary = $('#salary');
                const $workStartDay = $('#work_start_day');
                const $company_param = $('#company_param');
                const $department_param = $('#department_param');
                const $personal_param = $('#personal_param');

                const $result = $('#result');
                const $t13 = $('#t13');
                const $total = $('#total');
                const $totalBeforeLunarNewYear = $('#totalBeforeLunarNewYear');
                const $totalAfterLunarNewYear = $('#totalAfterLunarNewYear');

                const endDateOfYear = "2020-12-31";

                const totalWorkDay = moment(endDateOfYear).diff($workStartDay.val(), 'days');

                const roundWorkYear = totalWorkDay/365 >= 1 ? 1 : totalWorkDay/365;

                let salary13 = $salary.val() * roundWorkYear;

                const bonus = (salary13 * $company_param.val() * $department_param.val() * $personal_param.val()) - salary13;

                const total = salary13 + bonus;

                $result.val(numeral(bonus).format('0,0'));
                $t13.val(numeral(salary13).format('0,0'));

                $totalBeforeLunarNewYear.val(numeral(total * 0.7).format('0,0'));
                $totalAfterLunarNewYear.val(numeral(total * 0.3).format('0,0'));

                $total.val(numeral(total).format('0,0'));
            });

            $('.icon-eye-toggle').click(function() {
                const $this = $(this);
                if ($(this).hasClass('fa-eye-slash')) {
                    $this.removeClass('fa-eye-slash').addClass('fa-eye');
                }
                else {
                    $this.removeClass('fa-eye').addClass('fa-eye-slash');
                }

                const $input = $this.prev();

                if ($input.attr('type') === 'text') {
                    $input.attr('type', 'password');
                } else {
                    $input.attr('type', 'text');
                }
            })
        });
    </script>
</body>
</html>